<div class="min-h-screen bg-gray-50 dark:bg-[#101922] font-display text-[#111418] dark:text-white pb-12">


    <!-- Navbar -->
    <nav
        class="sticky top-0 z-50 bg-white/80 dark:bg-[#101922]/90 backdrop-blur-md border-b border-gray-200 dark:border-gray-800">
        <div class="max-w-7xl mx-auto px-4 md:px-8 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <a routerLink="/home" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
                    <span class="material-symbols-outlined">arrow_back</span>
                </a>
                <h1 class="text-xl font-bold">Mon Profil</h1>
            </div>
            <a routerLink="/home" class="text-sm font-bold text-primary hover:underline">
                Retour à l'accueil
            </a>
        </div>
    </nav>

    <main class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <div class="bg-white dark:bg-gray-900 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-800 p-8">

            <div class="flex flex-col items-center mb-8">
                <div class="size-24 rounded-full bg-primary/10 flex items-center justify-center mb-4">
                    <span class="material-symbols-outlined text-5xl text-primary">person</span>
                </div>
                <h2 class="text-2xl font-bold">{{ user?.name }}</h2>
                <p class="text-gray-500">{{ user?.email }}</p>
            </div>

            <form [formGroup]="profileForm" (ngSubmit)="onSubmit()" class="space-y-6">
                <!-- Name -->
                <div class="space-y-2">
                    <label class="text-sm font-bold text-gray-700 dark:text-gray-300">Nom complet</label>
                    <div class="relative">
                        <span
                            class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400">badge</span>
                        <input type="text" formControlName="name" [class.bg-gray-50]="!isEditing"
                            [class.bg-white]="isEditing"
                            class="w-full h-12 pl-12 pr-4 rounded-xl border border-gray-200 dark:border-gray-700 focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all">
                    </div>
                </div>

                <!-- Email -->
                <div class="space-y-2">
                    <label class="text-sm font-bold text-gray-700 dark:text-gray-300">Email</label>
                    <div class="relative">
                        <span
                            class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400">mail</span>
                        <input type="email" formControlName="email" [class.bg-gray-50]="!isEditing"
                            [class.bg-white]="isEditing"
                            class="w-full h-12 pl-12 pr-4 rounded-xl border border-gray-200 dark:border-gray-700 focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all">
                    </div>
                </div>

                <!-- Password -->
                <div class="space-y-2">
                    <label class="text-sm font-bold text-gray-700 dark:text-gray-300">Mot de passe</label>
                    <div class="relative">
                        <span
                            class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400">lock</span>
                        <input type="password" formControlName="password" [class.bg-gray-50]="!isEditing"
                            [class.bg-white]="isEditing"
                            class="w-full h-12 pl-12 pr-4 rounded-xl border border-gray-200 dark:border-gray-700 focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all">
                    </div>
                </div>

                <!-- Actions -->
                <div class="pt-6 flex flex-col gap-3">
                    <div *ngIf="!isEditing" class="flex flex-col gap-3">
                        <button type="button" (click)="toggleEdit()"
                            class="w-full h-12 bg-primary text-white font-bold rounded-xl shadow-lg shadow-primary/20 hover:bg-primary/90 transition-all">
                            Modifier mes informations
                        </button>
                    </div>

                    <div *ngIf="isEditing" class="flex gap-3">
                        <button type="button" (click)="toggleEdit()"
                            class="flex-1 h-12 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-bold rounded-xl hover:bg-gray-200 dark:hover:bg-gray-700 transition-all">
                            Annuler
                        </button>
                        <button type="submit" [disabled]="profileForm.invalid || isSubmitting"
                            class="flex-1 h-12 bg-primary text-white font-bold rounded-xl shadow-lg shadow-primary/20 hover:bg-primary/90 transition-all disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2">
                            <span *ngIf="!isSubmitting">Enregistrer</span>
                            <span *ngIf="isSubmitting"
                                class="material-symbols-outlined animate-spin">progress_activity</span>
                        </button>
                    </div>

                    <div class="border-t border-gray-100 dark:border-gray-800 my-4"></div>

                    <button type="button" (click)="logout()"
                        class="w-full h-12 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 font-bold rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-all flex items-center justify-center gap-2">
                        <span class="material-symbols-outlined">logout</span>
                        Déconnexion
                    </button>

                    <button type="button" (click)="deleteAccount()"
                        class="w-full h-12 text-red-500 font-bold rounded-xl hover:bg-red-50 dark:hover:bg-red-900/10 transition-all flex items-center justify-center gap-2">
                        <span class="material-symbols-outlined">delete_forever</span>
                        Supprimer mon compte
                    </button>
                </div>
            </form>

        </div>
    </main>

    <!-- Mobile Bottom Navigation Bar (Hidden on Desktop) -->
    <nav
        class="md:hidden fixed bottom-0 left-0 right-0 z-40 w-full glass border-t border-gray-200 dark:border-gray-800 pb-8 pt-3 px-8 bg-white/90 backdrop-blur-md">
        <div class="flex items-center justify-between max-w-md mx-auto">
            <a routerLink="/home"
                class="flex flex-col items-center gap-1 text-gray-400 hover:text-primary transition-colors">
                <span class="material-symbols-outlined">home</span>
                <span class="text-[10px] font-bold">Accueil</span>
            </a>
            <a routerLink="/favorites"
                class="flex flex-col items-center gap-1 text-gray-400 hover:text-primary transition-colors">
                <span class="material-symbols-outlined">favorite_border</span>
                <span class="text-[10px] font-bold">Favoris</span>
            </a>
            <a routerLink="/applications"
                class="flex flex-col items-center gap-1 text-gray-400 hover:text-primary transition-colors">
                <span class="material-symbols-outlined">work_outline</span>
                <span class="text-[10px] font-bold">Candidatures</span>
            </a>
            <a routerLink="/profile" class="flex flex-col items-center gap-1 text-primary">
                <span class="material-symbols-outlined filled-icon">person</span>
                <span class="text-[10px] font-bold">Profil</span>
            </a>
        </div>
    </nav>
</div>